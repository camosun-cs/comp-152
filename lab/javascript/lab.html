<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Javascript - COMP 152</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="https://telic.github.io/comp152/lab/template/prism.css"/>
    <link rel="stylesheet" href="https://telic.github.io/comp152/lab/template/basic.css"/>
    <link rel="stylesheet" href="rsrc/puzzle.css">
</head>
<body>

<header>
    <h1>COMP 152 - Javascript</h1>
    <nav>
        <ol>
            <li><a href="#outcomes">Learning Outcomes and Introduction</a></li>
            <li><a href="#task1"><strong>Task 1</strong>: Adding Javascript to a web page</a></li>
            <li><a href="#task2"><strong>Task 2</strong>: The Game Of Life algorithm</a></li>
            <li><a href="#task3"><strong>Task 3</strong>: Looking closer at the code</a></li>
            <li><a href="#submission">Submission</a></li>
        </ol>
    </nav>
</header>

<section id="outcomes">
    <h2>Learning Outcomes and Introduction</h2>
    <p>In this lab assignment you will learn about:</p>
    <ul>
        <li>adding Javascript to a page</li>
        <li>basics of algorithms, including
            <ul>
                <li>sequential instructions</li>
                <li>function calls and return values</li>
                <li>variables</li>
                <li>looping (over array contents)</li>
                <li>conditional branches</li>
            </ul>
        </li>
        <li>manipulating 2-dimensional arrays</li>
        <li>using functions as data</li>
        <li>objects and methods</li>
        <li>finding script errors</li>
    </ul>

</section>

<section id="task1">
    <h2>Task 1: Adding JavaScript to a web page <small>(10 marks)</small></h2>

    <h3>Instructions</h3>
    <ol class="instructions">
        <li>Create a <samp>Javascript</samp> folder to contain all of your work for this lab</li>
        <li>Make a new text file named <kbd>index.html</kbd> and add the basic
            structural elements required for HTML (eg. html, head, title, body).
            <aside class="note">
                Hint: copy your index.html file from Lab 8 to get started
                quickly!
            </aside>
        </li>
        <li>Add a main heading, your name, lab section, and a picture of your
            favourite form of microbial life (I'm rather partial to
            <a href="http://www.ppdictionary.com/parasites/gondii.htm">this one</a>).</li>

        <li><details>
            <summary>If you haven't seen the "element counter" lab demo, try it yourself...</summary>

            <ol class="instructions optional">
                <li>Add the following code in the <samp>head</samp> of your page:
                    <!-- external/orderIsImportant.js -->
                    <pre><code class="language-markup">&lt;script src="http://comp152.dynu.com/orderIsImportant.js">&lt;/script></code></pre>
                    <aside class="info">
                        <samp>script</samp> links a Javascript file to your document,
                        similarly to what <samp>link</samp> does for CSS.
                        When you open your web page in a browser, the linked script
                        will run immediately and show an alert
                        box telling you how many elements are on your page.
                    </aside>
                    <aside class="info">
                        While you're here, why not <a href="http://comp152.dynu.com/orderIsImportant.js">take
                        a look at the code</a>? Can you figure out how it works?
                    </aside>
                </li>
                <li>Remove the script from the <samp>head</samp> of your document and
                    put it somewhere in the middle of your <samp>body</samp> instead.
                    Save and refresh your browser and notice the differences. Try moving
                    the script element and creating duplicates in different places in your
                    document, saving and refreshing each time you make a change.
                    <aside class="info">
                        You should notice two differences depending on where you put the
                        script tags. The most obvious difference is that the reported
                        number of elements changes.
                        Secondly, look underneath the alert
                        box while it is still open: pieces of your content that occur
                        after the script <em>will not appear</em> until after the alert
                        box is closed and the script has finished running!
                    </aside>
                </li>
                <li>Remove the element counting script when you're done so that
                    it doesn't interfere with the rest of the lab.</li>
            </ol></details>
        </li>
        <!-- external/GameOfLife.js -->
        <li>Add a script element to link <samp>http://comp152.dynu.com/GameOfLife.js</samp>
            to your document.
            <aside class="info">
                Don't worry, nothing is supposed to happen! This script
                is a <dfn>library</dfn>: it defines functions for you to use
                in another script, but doesn't do anything directly on its own.
            </aside>
        </li>
        <li>Create a a new text file called <samp><kbd>life.js</kbd></samp> with this
            one small piece of Javascript code:
            <pre><code class="language-javascript">GameOfLife();</code></pre>
            <aside class="info">
                This code runs the <samp>GameOfLife</samp> function which
                was provided by the library you linked in step 5. You'll learn
                more about this function in <a href="#task2">Task 2</a>.
            </aside>
        </li>
        <li>Add a script tag in your <samp>life.html</samp> file to link your
            new <samp>life.js</samp> script to your document, then refresh
            your browser. Make sure you add your script <em>later in the
            document</em> than the library script.  A blank Game of Life board
            will appear on your page if you've done everything correctly!</li>
        <li>
            Write an answer to each of the following two questions on your webpage:
            <ul>
                <li>Why does the "element counter" script show a different number
                    when added in different places in your document?</li>
                <li>Why does your script need to be added <em>after</em> the
                    library script?</li>
            </ul>
        </li>
    </ol>

    <h3>Deliverables</h3>
    <ul>
        <li>An <samp>index.html</samp> document with
            <ul>
                <li>a heading</li>
                <li>your name and lab section</li>
                <li>an embedded graphic</li>
                <li>two script elements, linking your <samp>life.js</samp>
                    and the provided library (<a href="http://comp152.dynu.com/GameOfLife.js"><samp>http://comp152.dynu.com/GameOfLife.js</samp></a>)
                <li>answers to the two questions in step 8 above</li>
                <li>good HTML structure</li>
                <li>appropriate indenting</li>
            </ul>
        </li>
        <li>A <samp>life.js</samp> script that calls the <samp>GameOfLife</samp>
            function.</li>
    </ul>
</section>

<section id="task2">
    <h2>Task 2: The Game Of Life algorithm <small>(10 marks)</small></h2>

    <p>The rules for Conway's Game Of Life are quite simple:</p>
    <ul>
        <li>Any live cell with fewer than two live neighbours dies</li>
        <li>Any live cell with more than three live neighbours also dies</li>
        <li>Any live cell with two or three live neighbours lives on to the next generation</li>
        <li>Any dead cell with exactly three live neighbours becomes a live cell</li>
    </ul>
    <p>We are going to create a Javascript function that applies these rules to
       an existing grid of cells (stored as a 2-dimensional array). Our function
       will determine what the "next generation" of life looks like. The library
       code provided will apply your function repeatedly over time and display
       the result after each step.</p>
    <p>Don't worry too much about the specifics of the Javascript syntax; your only
       goal is to understand the <em>algorithm</em> needed to accomplish this!</p>

    <h3>Instructions</h3>
    <ol class="instructions">
        <li>Solve the algorithm puzzle below by drag-and-dropping the puzzle
            pieces into the correct order and nesting.
            <aside class="info">
                Feel free to discuss with the other students in your lab, and
                make sure you understand the solution! You won't find
                out whether you've done it correctly until trying out your
                code in step 6…
            </aside>
        </li>
        <li>Click the "Show my solution as code" checkbox</li>
        <li>Copy &amp; paste the resulting code into your <samp>life.js</samp>
            script.
            <aside class="info">
                Make sure you copy all of it, including the closing braces
                (<samp>}</samp>) at the end!
            </aside>
        </li>
        <li>Provide your new <samp>updateCells</samp> function as a parameter to
            the <samp>GameOfLife</samp> function, like this:
            <pre><code class="language-javascript">GameOfLife(updateCells);</code></pre>
        </li>
        <li>Save your files and refresh your browser.</li>
        <li>Draw something on the Game Of Life board with your mouse and press
            the <samp>Step</samp> or <samp>Play</samp> button to test it out!

            <aside class="info">
                If nothing happens, you've probably made a mistake somewhere in your
                <samp>life.js</samp> code. All modern browsers have a built-in
                tool to help find errors in Javascript code called the "Console".
                Open the Console by <a href="http://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers#answer-77337">following these instructions</a> for your
                browser. The Console will describe any errors found in
                <span style="color:red">red text</span>, and will show you
                where in your file it occurred!
            </aside>
        </li>
    </ol>

    <h3>Algorithm Puzzle</h3>
    <div style="margin: .5em;">
        <label>
            Show my solution as code:
            <input id="puzzle-toggle" type="checkbox">
        </label>
    </div>
   <dl class="puzzle">
        <dt><span class="codeonly">// </span>Define a function to compute the next step in the Game Of Life simulation</dt>
        <dd><code class="language-javascript">function updateCells(oldCells) {</code></dd>
        <dd class="sort-area sort-main">
            <dl>
                <dt><span class="codeonly">// </span>Create an new grid with the same dimensions as <samp>oldCells</samp></dt>
                <dd><code class="language-javascript">var newCells = GameOfLife.createGrid(oldCells.length);</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>Declare variables to keep track of our position in the grid and the number of alive neighbours</dt>
                <dd><code class="language-javascript">var row, col, neighbours;</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>For each row of the grid...</dt>
                <dd><code class="language-javascript">for (row=1; row &lt; oldCells.length-1; row++) {</code></dd>
                <dd class="sort-area sort-inline"></dd>
                <dd><code class="language-javascript closebrace">}</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>For each column in the current row...</dt>
                <dd><code class="language-javascript">for (col=1; col &lt; oldCells[row].length-1; col++) {</code></dd>
                <dd class="sort-area sort-inline"></dd>
                <dd><code class="language-javascript closebrace">}</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>Count the number of alive cells neighbouring the current cell</dt>
                <dd><code class="language-javascript">neighbours = oldCells[row-1][col-1] + oldCells[row-1][col] + oldCells[row-1][col+1]; // above</code>
                <code class="language-javascript">neighbours += (oldCells[row][col-1] + oldCells[row][col+1]); // left and right</code>
                <code class="language-javascript">neighbours += (oldCells[row+1][col-1] + oldCells[row+1][col] + oldCells[row+1][col+1]); // and below</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>If there are less than 2 or more than 3 alive neighbours...</dt>
                <dd><code class="language-javascript">if (neighbours &lt; 2 || neighbours > 3) {</code></dd>
                <dd class="sort-area sort-inline"></dd>
                <dd><code class="language-javascript closebrace">}</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>The current cell dies</dt>
                <dd><code class="language-javascript">newCells[row][col] = 0;</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>If there are exactly 2 alive neighbours…</dt>
                <dd><code class="language-javascript">if (neighbours == 2){</code></dd>
                <dd class="sort-area sort-inline"></dd>
                <dd><code class="language-javascript closebrace">}</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>The current cell stays in its previous state</dt>
                <dd><code class="language-javascript">newCells[row][col] = oldCells[row][col];</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>If there are exactly 3 alive neighbours…</dt>
                <dd><code class="language-javascript">if (neighbours == 3) {</code></dd>
                <dd class="sort-area sort-inline"></dd>
                <dd><code class="language-javascript closebrace">}</code></dd>
            </dl>
            <dl>
                <dt><span class="codeonly">// </span>The current cell becomes (or stays) alive</dt>
                <dd><code class="language-javascript">newCells[row][col] = 1;</code></dd>
            </dl>

            <dl>
                <dt><span class="codeonly">// </span>Return the new grid of cells</dt>
                <dd><code class="language-javascript">return newCells;</code></dd>
            </dl>
        </dd>
        <dd><code class="language-javascript closebrace">}</code></dd>
    </dl>

    <h3>Deliverables</h3>
    <ul>
        <li>updated <samp>life.js</samp> script with
            <ul>
                <li>a function named <samp>updateCells</samp> which takes an
                    existing grid of cells as a parameter, applies a single
                    iteration of the game rules, and returns the result</li>
                <li>a call to the <samp>GameOfLife</samp> function,
                    providing your <samp>updateCells</samp> function
                    as a parameter</li>
            </ul>
        </li>
    </ul>
</section>

<section id="task3">
    <h2>Task 3: Looking closer at the code <small>(10 marks + bonus)</small></h2>
    
    <h3>Instructions</h3>
    <ol class="instructions">
        <li>
            Carefully examine your <samp>updateCells</samp> function and experiment
            with minor changes in order to answer the following questions:
            <ul>
                <li>Why do cells on the outer edge of the grid always die?</li>
                <li>Why does this function create a new grid instead
                    of reusing <samp>oldCells</samp>?</li>
                <li>Does the order of the <samp>if</samp> statements matter?
                    Why or why not?</li>
                <li>What would happen if the inner and outer <samp>for</samp>
                    loops were reversed?</li>
                <li><strong>(bonus)</strong> How do different life and death
                    conditions affect the simulation? For example, what happens
                    if 5 or more live neighbours are required for death by
                    over-crowding?</li>
            </ul>
            Record your answers on your web page
        </li>
        <li><strong>(bonus)</strong> Using three separate <samp>if</samp>
            blocks to test neighbour conditions is messy and inefficient.
            Rewrite them as a single <samp>if</samp>, <samp>else if</samp>,
            <samp>else</samp> chain.</li>
        <li><strong>(bonus)</strong> Rewrite your <samp>updateCells</samp> function
            so that cells on the edge of the grid are considered neighbours of
            cells on the opposite edge.</li>
        <li><strong>(bonus)</strong> The <samp>GameOfLife</samp> function returns
            an object with methods for controlling the simulation. It also accepts
            a starting grid as a second parameter. Change your code so that the
            simulation starts automatically from an interesting starting condition
            when your page loads.
            <aside class="info">
                <em>Hint:</em> you can type bits of Javascript into your browser's
                Console, and they will be run immediately. It will also show you
                the return value of bit of code you run this way. Use the Console
                to discover what methods are available on the object returned
                from <samp>GameOfLife()</samp>.
            </aside>
        </li>
    </ol>

    <h3>Deliverables</h3>
    <ul>
        <li>added answers to the above questions to <samp>life.html</samp></li>
        <li><strong>(bonus)</strong> improvements to <samp>life.js</samp></li>
    </ul>

</section>

<section id="submission">
    <h2>Submission</h2>
    <p>After completing the assignment, create a plain text file called <samp>Lab10_<var>first</var>_<var>last</var>.txt</samp>. Add your student name at the top of the text document, followed by a small paragraph describing five things you have learned in this lab. Write also five things you are still finding difficult to understand and would like to see more examples in class. </p>
    <p>ZIP your <samp>Lab10/</samp> folder with your completed work.</p>
    <p>Make sure to rename your <samp>Lab10.zip</samp> to <samp>lab10_<var>first</var>_<var>last</var>.zip</samp> before your submit your file to the dropbox. </p>
   
    <p>
        <b>NOTE</b>: This assignment is to be done <em>individually</em>. You can
        help one another with problems and questions, but in the end everyone must
        do their own assignment.
    </p>

    <table class="marks">
        <thead>
            <tr><th>Criteria</th><th>Marks</th></tr>
        </thead>
        <tbody>
            <tr><th colspan="2">Overall Assessment</th></tr>
            <tr><td>Wow Factor</td><td>10</td></tr>
            <tr><th colspan="2">Task 1</th></tr>
            <tr><td>HTML structure and formatting</td><td>5</td></tr>
            <tr><td>Answers to questions</td><td>5</td></tr>
            <tr><th colspan="2">Task 2</th></tr>
            <tr><td><samp>updateCells</samp> solution</td><td>5</td></tr>
            <tr><td>Functioning Game Of Life</td><td>5</td></tr>
            <tr><th colspan="2">Task 3</th></tr>
            <tr><td>Answers to required questions</td><td>10</td></tr>
            <tr><th>Total</th><td>40</td></tr>
        </tbody>
    </table>        
</section>

<script src="rsrc/jquery-2.1.1.min.js"></script>
<script src="rsrc/jquery-ui.min.js"></script>
<script src="rsrc/puzzle.js"></script>
<script src="https://telic.github.io/comp152/lab/template/prism.js"></script>
<script src="https://telic.github.io/comp152/lab/template/modernizr-details.min.js"></script>
<script src="https://telic.github.io/comp152/lab/template/details-polyfill.min.js"></script>
</body>
</html>